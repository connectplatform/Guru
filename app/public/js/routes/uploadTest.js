// Generated by CoffeeScript 1.3.3
(function() {

  define(["load/server"], function(server) {
    return function(_, templ) {
      return server.ready(function() {
        console.log('calling awsUpload');
        return server.awsUpload(function(err, fields) {
          if (err != null) {
            console.log("error: ", err);
          }
          console.log('got fields: ', fields);
          $('#content').html(templ({
            s3: fields
          }));
          console.log('done rendering template');
          return $("submit").click(function(evt) {
            var filePath;
            evt.preventDefault();
            filePath = 'testFile';
            $('#file-upload [name=key]').val(filePath);
            return $('#file-upload').submit();
          });
        });
      });
    };
  });

}).call(this);
